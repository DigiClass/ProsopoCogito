@(
  user: models.generated.tables.records.UserRecord,
  usedDiskspace: Long,
  quotaMB: Int,
  myDocCount: Int,
  sharedDocuments: models.Page[(models.generated.tables.records.DocumentRecord, models.generated.tables.records.SharingPolicyRecord)]
 )(implicit request: RequestHeader, webjars: WebJarAssets)

@accessLevel(lvl: String) = {
  @if(lvl == "READ") {
    <span title="Read-only Access" class="icon">&#xf06e;</span>
  } else { @if(lvl == "WRITE") {
    <span title="Write Access" class="icon">&#xf044;</span>
  } else { @if(lvl == "ADMIN") {
    <span title="Admin Privileges" class="icon">&#xf0ad;</span>
  }}}
}

@_layout(user, usedDiskspace, quotaMB, myDocCount, sharedDocuments.total, "shared") {
  <table class="document-list">
    <thead>
      <tr>
        <td></td> <!-- content type icon -->
        <td class="sortable" data-field="author">Author<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="title">Title<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="date_freeform">Date<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="owner">Owner<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="shared-by">Shared By<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable centered" data-field="permission">Permission Level<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="edit-at">Last Edit<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="filesize">File Size<span class="sort icon">&#xf0dc;</span></td>
        <td class="sortable" data-field="annotations">Annotations<span class="sort icon">&#xf0dc;</span></td>
      </tr>
    </thead>
    <tbody>
      @for((document, sharingPolicy) <- sharedDocuments.items) {
        <tr class="document" data-id="@document.getId">
          <td></td> <!-- content type icon -->
          <td>@document.getAuthor</td>
          <td>@document.getTitle</td>
          <td>@document.getDateFreeform</td>
          <td>@document.getOwner</td>
          <td>@sharingPolicy.getSharedBy</td>
          <td class="centered">@accessLevel(sharingPolicy.getAccessLevel)</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
        </tr>
      }
    </tbody>
  </table>

  @views.html.pagination(controllers.my.routes.MyRecogitoController.index(user.getUsername.toLowerCase, Some("shared"), None, None, None).url, sharedDocuments)

  @helper.javascriptRouter("jsRoutes")(
    controllers.document.annotation.routes.javascript.AnnotationController.showAnnotationView
  )
}
